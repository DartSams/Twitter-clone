<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>

    <!-- <link rel="stylesheet" type= "text/css" href="\twitter clone\static\index.css"> -->
    <link rel="stylesheet" href="{{url_for('static',filename='index.css')}}">
</head>

<!-- <header class="flex-container-header">
    <a href="/" class="flex-item">Website Name</a>
    <a href="/" class="flex-item">Home</a>
    <a href="/" class="flex-item">Shop</a>
    <a href="" class="flex-item">About Us</a>
    <a href="" class="flex-item">Contact</a>
    {% if "username" in session %}
    <a href="/profile" class="flex-item">{{session["username"]}}</a>
    {% elif "username" not in session %}
    <a href="">Login</a>
    {% endif %}
</header> -->

<body>

    <main>
        <h2 class="title" style="color: white;display: flex; justify-content: center;">Website Users</h2>
        <form action="" method="POST" style="color: white;display: flex; justify-content: center;width:100px">
            <input type="text" placeholder="Search.." name="search">
            <button type="submit"><i class="fa fa-search"></i></button>
        </form>
        <div class="container">
            <div class="navbar">
                <a href="/" class="flex-item"><span>Website Name</span></a>
                <a href="/" class="flex-item" id="active"><span>Home</span></a>
                <a href="/" class="flex-item">Shop</a>
                <a href="" class="flex-item">About Us</a>
                <a href="" class="flex-item">Contact</a>
                {% if "username" in session %}
                <!-- <div class="flex-item">
                    <img src="\static\w3lynx_200.png" alt="" style="width: 10%; height:10%;">
                    <a href="/profile" >{{session["username"]}}</a>
                    <a href="/logout">Logout</a>  
                </div> -->
                <a href="/{{session['username']}}" class="flex-item">{{session["username"]}}</a>
                {% elif "username" not in session %}
                <a href="/login" class="flex-item">Login</a>
                {% endif %}

                <!-- <div class="profile-bar">
                    <img src="\static\w3lynx_200.png" alt="" style="width: 10%; height:10%;" >
                    <a href="/profile" >{{session["username"]}}</a>
                    <a href="/logout" >Logout</a>  
                </div> -->
            </div>
            
            <!-- <div class="login_create"> -->
                <div class="all-post">
                    <!-- <h3>Post bar</h3> -->
                    
                    {% if "username" in session%}
                    <form action="" method="POST" enctype=multipart/form-data>
                        <textarea name="post-field" id="" cols="50" rows="5" style="resize: none;"></textarea>
                        <div class="form-buttons">
                            <input type="file" name="file" style="color: white;">
                            <!-- <input type="submit" value="Post"> -->
                            <button type="submit">Post</button>
                        </div>
                    </form>
                    {%endif%}

                    <div class="post-board">
                        <div class="post">

                            {%for i in messages%}
                            <!-- {{session["username"]}} -->
                            <a href="/{{i[4]}}">
                            <div class="post-detail">
                                <p class="post-name">By {{i[0]}} - {{i[1]}}
                                    <!-- {% if session["username"] == i[0] %}
                                    <a href="/clear" style="float: right; text-decoration: none; color:white">delete all post</a>
                                    {% endif %} -->
                                </p>
                                <p class="post-body">{{i[2].capitalize()}}</p>
                                
                                <!-- {% if i[3] != None %} -->
                                    <!-- <img src='/static/preview_img/{{i[3]}}' alt="{{i[3]}}"> -->
                                    
                                <!-- {{i[3].split(".")}}
                                <br>
                                {{i[3].split(".")[0].replace("_"," ")}}
                                <br>
                                {{i[3].split(".")[1]}} -->

                                {% if 'mp4' == i[3].split(".")[1] %}
                                    <video controls width="320" height="240">
                                        <source src="/static/preview_img/{{i[3].split('.')[0]}}.{{i[3].split('.')[1]}}" type="video/{{i[3].split('.')[1]}}">
                                    Your browser does not support the audio element.
                                    </video>

                                {%elif 'mp3' == i[3].split(".")[1]%}
                                    <audio controls width="320" height="240">
                                        <source src="/static/preview_img/{{i[3].split('.')[0]}}.{{i[3].split('.')[1]}}" type="audio/{{i[3].split('.')[1]}}">
                                    Your browser does not support the audio element.
                                    </audio>

                                {%endif%}

                                {% for pic_type in ALLOWED_EXTENSIONS%}
                                    {% if pic_type == i[3].split(".")[1] %}
                                        <img src="/static/preview_img/{{i[3]}}" alt="">
                                        <!-- {{i[3]}} -->
                                    {%endif%}
                                    <!-- {{pic_type}} -->
                                {%endfor%}

                                <!-- {%endif%} -->

                                <!-- <p class="post-date">Posted {{i[1]}}</p> -->
                                <!-- <p>post ID = {{i[4]}}</p> -->
                            </a> 
                            </div>
                            {%endfor%}
                            
                        </div>
                    </div>
                </div>
                    
        
            </div>
        </div>

    </main>
    
</body>

</html>